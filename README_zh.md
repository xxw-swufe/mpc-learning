# 实时 MPC 学习与工程实现记录

本仓库系统性地记录了我在 **模型预测控制（Model Predictive Control, MPC）**
方向的学习与工程实践过程，目标是将 MPC 从理论推导逐步落地到
**实时机器人控制系统** 中。

本项目关注的不仅是算法是否“能跑”，而是：
- 是否 **工程可实现**
- 是否 **满足实时性**
- 是否 **具有清晰的系统接口**
- 是否 **具备失效保护机制**

---

## 项目目标

本项目的长期目标是构建一个 **可运行、可复现、可扩展的实时 NMPC 控制框架**，
适用于腿式机器人或其他具身智能系统。

具体目标包括：

- 从连续系统出发，构建离散状态空间模型
- 从 LQR 过渡到带约束的非线性 MPC
- 使用 CasADi + IPOPT 实现 NMPC 求解器
- 构建 50–200 Hz 的实时 MPC 控制循环
- 将 MPC 输出与 1 kHz 低层 PD / FOC 控制器对接
- 在仿真环境（IsaacGym / IsaacLab）中进行系统级验证

---

## 项目路线图

### 第一阶段：MPC 基础建模
- 连续 / 离散状态空间建模
- 离散化方法与数值稳定性分析
- LQR 与线性 MPC 基线实现
- 非线性动力学建模（质心模型 / 简化腿模型）
- CasADi 符号建模与自动求导

### 第二阶段：MPC 控制器构建
- 轨迹跟踪与平滑性代价函数设计
- 状态 / 输入 / 接触相关约束
- CasADi + IPOPT 非线性 MPC 求解
- Predict–Optimize–Control 闭环
- 无噪声闭环仿真验证

### 第三阶段：实时 MPC 与接口设计
- 50–200 Hz MPC 控制循环实现
- 状态估计接口（IMU / 运动学 / 接触）
- 求解器 warm start 策略
- 延迟补偿（latency compensation）
- 参考指令输出（速度 / 落足点 / 接触序列）

### 第四阶段：底层控制与系统集成
- MPC 输出到关节级指令映射
- 与 1 kHz PD / FOC 控制器对接
- QP / NMPC 求解失败的 fail-safe 设计
- IsaacGym / IsaacLab 仿真验证
- 高带宽可部署 MPC 控制模块

---

## 仓库结构说明（规划中）
.
├─ docs/ # 博客式文档（推导、设计思路、实验记录）
├─ src/ # MPC、动力学、状态估计、控制接口
├─ configs/ # 控制器与实验参数
├─ scripts/ # Demo 运行与可视化脚本
├─ experiments/ # 实验日志与结果
└─ tests/ # 单元测试


---

## 当前状态

🚧 本仓库处于持续开发中。

每完成一个阶段，都会提供：
- ✅ 可运行代码
- 📊 定量评估指标
- 📈 可视化结果（曲线 / GIF / 视频）

---

## 说明

本项目主要用于：
- 系统性学习 MPC
- 构建可展示的工程作品集
- 为后续机器人控制 / 具身智能方向研究与求职做准备

欢迎交流与讨论。
